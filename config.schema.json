{
  "pluginAlias": "SmartThingsAC-KM81",
  "pluginType": "platform",
  "singular": true,
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "플랫폼 이름",
        "type": "string",
        "default": "SmartThings AC",
        "required": true
      },
      "clientId": {
        "title": "Client ID",
        "type": "string",
        "required": true
      },
      "clientSecret": {
        "title": "Client Secret",
        "type": "string",
        "required": true
      },
      "redirectUri": {
        "title": "Redirect URI",
        "type": "string",
        "default": "http://localhost:8999/oauth/callback",
        "required": true
      },
      "devices": {
        "title": "연동할 에어컨 장치",
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "deviceLabel": {
              "title": "에어컨 이름 (SmartThings 레이블)",
              "type": "string",
              "required": true
            },
            "model": {
              "title": "모델명 (선택)",
              "type": "string"
            },
            "serialNumber": {
              "title": "일련번호 (선택)",
              "type": "string"
            },
            "coolModeCommand": {
              "title": "HomeKit '냉방(COOL)' 전송 모드",
              "type": "string",
              "enum": ["dry", "cool"],
              "enumNames": ["제습(Dry)로 명령", "냉방(Cool)로 명령"],
              "default": "dry",
              "description": "Home에서 '냉방'을 선택했을 때 실제 에어컨에 보낼 모드"
            },
            "swingBinding": {
              "title": "스윙(Swing) 토글 ↔ 기능",
              "type": "string",
              "enum": ["none", "windFree", "childLock"],
              "enumNames": ["사용 안 함", "무풍(WindFree)", "차일드락(Child Lock)"],
              "default": "windFree"
            },
            "lockBinding": {
              "title": "차일드락(Lock) 토글 ↔ 기능",
              "type": "string",
              "enum": ["none", "autoClean", "childLock"],
              "enumNames": ["사용 안 함", "자동건조(Auto Clean)", "차일드락(Child Lock)"],
              "default": "autoClean"
            },
            "exposeWindFreeSwitch": {
              "title": "무풍 별도 스위치 노출",
              "type": "boolean",
              "default": false
            },
            "exposeChildLockSwitch": {
              "title": "차일드락 별도 스위치 노출",
              "type": "boolean",
              "default": false
            },
            "exposeAutoCleanSwitch": {
              "title": "자동건조 별도 스위치 노출",
              "type": "boolean",
              "default": false
            }
          },
          "required": ["deviceLabel"]
        }
      }
    },
    "required": ["name", "clientId", "clientSecret", "redirectUri", "devices"]
  },
  "layout": [
    "name",
    {
      "type": "help",
      "help": "<b>인증 설정</b><br>1) Client ID, Client Secret, Redirect URI 입력 후 Homebridge 재시작<br>2) 로그에 출력되는 인증 URL로 접속해 권한 허용"
    },
    "clientId",
    "clientSecret",
    "redirectUri",
    {
      "key": "devices",
      "type": "array",
      "title": "에어컨 목록",
      "items": [
        "devices[].deviceLabel",
        "devices[].model",
        "devices[].serialNumber",
        {
          "type": "section",
          "title": "모드/기능 매핑",
          "items": [
            "devices[].coolModeCommand",
            "devices[].swingBinding",
            "devices[].lockBinding"
          ]
        },
        {
          "type": "section",
          "title": "별도 스위치 노출",
          "items": [
            "devices[].exposeWindFreeSwitch",
            "devices[].exposeChildLockSwitch",
            "devices[].exposeAutoCleanSwitch"
          ]
        }
      ]
    }
  ]
}
